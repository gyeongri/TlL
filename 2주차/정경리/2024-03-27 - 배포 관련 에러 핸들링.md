##### 1. 백엔드 배포 에러 해결
---
문제 1) .env 파일을 인식하지 못하는 문제 발생
	![](https://i.imgur.com/m2zZXe9.png)
	
* 백엔드 배포 시 Jenkins의 Credentials에 PW, 포트 번호 등등을 따로 빼둔 .env 파일을 Secret file로 등록하고, Jenkins 파이프라인에서 이 .env파일을 BE 디렉터리의 최상단으로 복사해오는 방식을 사용하는데, 해당 파일을 인식하지 못하여 환경변수가 적용되지 않고, ${SERVER_PORT}라고 읽히고 있는 것...

✔ 어떻게 해결했나?
* Dockerfile에 copy문을 사용하여 .env 파일을 도커 컨테이너 안으로도 복사해오도록 해야한다.

##### 2. 
---
1번의 에러를 해결하고 나니, 다른 문제가 생겼다.
HTTP request parsing error...
아무 요청도 보낸 적이 없는데 갑자기 이런 에러가 생겨서 하루종일 고통 받았다..

```
![User]

2024-03-27T03:43:42.324Z INFO 1 --- [nio-3000-exec-1] o.apache.coyote.http11.Http11Processor : Error parsing HTTP request header Note: further occurrences of HTTP request parsing errors will be logged at DEBUG level. java.lang.IllegalArgumentException: Invalid character found in method name [0x160x030x010x000xee0x010x000x000xea0x030x03Z0xffw0xd70x1f&0x97lo0x930xbb0xa20xb40x910xc10x8e0x92b0xad0x1f0xa10xea0x070xdf00x1f0xd2s;t0xf70x9e ]. HTTP method names must be tokens at org.apache.coyote.http11.Http11InputBuffer.parseRequestLine(Http11InputBuffer.java:407) ~[tomcat-embed-core-10.1.19.jar!/:na] at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:264) ~[tomcat-embed-core-10.1.19.jar!/:na] at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.19.jar!/:na] at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896) ~[tomcat-embed-core-10.1.19.jar!/:na] at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744) ~[tomcat-embed-core-10.1.19.jar!/:na] at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.19.jar!/:na] at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-10.1.19.jar!/:na] at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.19.jar!/:na] at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.19.jar!/:na] at java.base/java.lang.Thread.run(Thread.java:840) ~[na:na]
```

nginx 쪽 에러 같아서 로그를 확인해보니...
















##### 3. 프론트 빌드 에러 해결
---
며칠째 해결이 되지 않고 있었던 타입 스크립트 에러..!
분명 로그로는 타입스크립트 에러라고 하는데...
선언하고 사용하지 않은 변수 등...
프론트 쪽에서 내 컴퓨터에서는 잘 되는데..?하면서 왜 배포가 안되는지 이해를 못했다.
물론 해당 에러가 발생하는 건 맞는데, 빌드에는 문제가 없다는 것이었다...

결론부터 말하자면..
이건 프론트 쪽에서 npm run build를 해보지 않고 npm run dev로만 보이는 결과를 바로 develop에 push 했기 때문에 생기는 에러다..!

**프론트에서 꼭 npm run build가 되는지 확인을 한 후에 배포 브랜치에 merge해야 한다.**


프론트에서 모든 에러가 뜨지 않도록 처리한 이후에 다시 merge 하니까 깔끔하게 해결됐다..!


